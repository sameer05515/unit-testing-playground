<section class="word-meaning-page py-4">
  <div class="container" *ngIf="detail$ | async as detail; else loading">
    <ng-container *ngIf="detail; else notFound">
      <div class="row g-4">
        <div class="col-12">
          <div class="word-header p-4 rounded text-white d-flex flex-column flex-lg-row justify-content-between gap-3 align-items-lg-center">
            <div>
              <h1 class="h3 mb-1">Occurrences of "{{ detail.id }}"</h1>
              <p class="mb-0 text-white-75">
                Explore the Sanskrit word usage across verses and quickly jump to the referenced shloks.
              </p>
            </div>
            <div class="d-flex flex-wrap gap-2">
              <a routerLink="/" class="btn btn-outline-light btn-sm">Home</a>
              <a
                *ngIf="detail.previousWMRoute"
                [routerLink]="detail.previousWMRoute"
                class="btn btn-light btn-sm"
              >
                Previous
              </a>
              <a
                *ngIf="detail.nextWMRoute"
                [routerLink]="detail.nextWMRoute"
                class="btn btn-light btn-sm"
              >
                Next
              </a>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="card border-0 shadow-sm">
            <div class="table-responsive">
              <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                  <tr>
                    <th scope="col">Word</th>
                    <th scope="col">Meaning</th>
                    <th scope="col">Reference</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of detail.data">
                    <td class="fw-semibold">{{ row.word }}</td>
                    <td>{{ row.meaning }}</td>
                    <td>
                      <a
                        *ngIf="row.route; else referenceText"
                        [routerLink]="row.route"
                        class="link-primary text-decoration-none"
                      >
                        {{ row.referenceHeader }}
                      </a>
                      <ng-template #referenceText>
                        <span>{{ row.referenceHeader }}</span>
                      </ng-template>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</section>

<ng-template #loading>
  <div class="d-flex justify-content-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading word meaningsâ€¦</span>
    </div>
  </div>
</ng-template>

<ng-template #notFound>
  <section class="py-5">
    <div class="container">
      <div class="alert alert-warning" role="alert">
        Requested word meaning entry was not found. Return to the
        <a routerLink="/" class="alert-link">home page</a>.
      </div>
    </div>
  </section>
</ng-template>


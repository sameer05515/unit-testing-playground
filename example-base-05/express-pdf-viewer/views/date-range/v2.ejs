<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Date Range Graph</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-gray-50 min-h-screen flex flex-col items-center justify-center p-6">
    <div class="max-w-3xl w-full bg-white rounded-2xl shadow-lg p-6">
      <h1 class="text-2xl font-bold text-center mb-6">ğŸ“† Filter by Date Range</h1>

      <div class="flex flex-wrap justify-center gap-4 mb-6">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Start Date</label>
          <input id="startDate" type="date" class="border rounded-lg p-2 w-40" />
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">End Date</label>
          <input id="endDate" type="date" class="border rounded-lg p-2 w-40" />
        </div>
        <button
          id="filterBtn"
          class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
        >
          Apply Filter
        </button>
      </div>

      <canvas id="countChart" class="w-full h-64"></canvas>
    </div>

    <script>
      // Sample Data
      const fullData = [
        { date: "2025-10-10", count: 8 },
        { date: "2025-10-11", count: 10 },
        { date: "2025-10-12", count: 5 },
        { date: "2025-10-13", count: 15 },
        { date: "2025-10-14", count: 7 },
        { date: "2025-10-15", count: 20 },
        { date: "2025-10-16", count: 11 },
        { date: "2025-10-17", count: 18 },
        { date: "2025-10-18", count: 9 },
        { date: "2025-10-19", count: 14 },
        { date: "2025-10-20", count: 6 },
        { date: "2025-10-21", count: 12 },
      ];

      const ctx = document.getElementById("countChart").getContext("2d");

      let chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: fullData.map((d) => d.date),
          datasets: [
            {
              label: "Count",
              data: fullData.map((d) => d.count),
              borderWidth: 2,
              borderColor: "#4F46E5",
              backgroundColor: "rgba(79,70,229,0.2)",
              fill: true,
              tension: 0.3,
              pointRadius: 4,
              pointBackgroundColor: "#4F46E5",
            },
          ],
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true } },
        },
      });

      document.getElementById("filterBtn").addEventListener("click", () => {
        const startDate = document.getElementById("startDate").value;
        const endDate = document.getElementById("endDate").value;

        const filtered = fullData.filter((d) => {
          return (!startDate || d.date >= startDate) && (!endDate || d.date <= endDate);
        });

        chart.data.labels = filtered.map((d) => d.date);
        chart.data.datasets[0].data = filtered.map((d) => d.count);
        chart.update();
      });
    </script>
  </body>
</html>

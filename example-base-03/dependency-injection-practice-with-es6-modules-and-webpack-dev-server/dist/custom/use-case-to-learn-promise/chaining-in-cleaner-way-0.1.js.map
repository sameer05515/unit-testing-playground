{"version":3,"file":"custom/use-case-to-learn-promise/chaining-in-cleaner-way-0.1.js","mappings":"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","sources":["webpack://dependency-injection-practice-with-es6-modules-and-webpack-dev-server/./src/scripts/custom/use-case-to-learn-promise/chaining-in-cleaner-way-0.1.js"],"sourcesContent":["const btn = document.createElement(\"button\");\r\nbtn.innerText = \"Fetch Data\";\r\nlet step = 1;\r\nlet success = false;\r\n\r\n// Helper function to simulate random API failures\r\nconst simulateApiCall = (response, failRate = 0.2) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (Math.random() < failRate) {\r\n      reject(new Error(\"Simulated API failure\"));\r\n    } else {\r\n      resolve(response);\r\n    }\r\n  });\r\n};\r\n\r\nconst logValue = (val, stepMessage) => {\r\n  console.log(stepMessage, val);\r\n  step++;\r\n  return val;\r\n};\r\n\r\nconst handleError = (err, stepMessage) => {\r\n  console.error(stepMessage, err);\r\n  throw new Error(`${err}: ${stepMessage}` );\r\n};\r\n\r\nconst fetchUserData = () => {\r\n  return fetch('https://jsonplaceholder.typicode.com/users/1')\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch user data');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => simulateApiCall(data))\r\n    .then(data => logValue(data, \"User data:\"))\r\n    .catch(err => handleError(err, \"Error in fetching user data:\"));\r\n};\r\n\r\nconst fetchUserPosts = (user) => {\r\n  return fetch(`https://jsonplaceholder.typicode.com/posts?userId=${user.id}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch user posts');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(posts => simulateApiCall(posts))\r\n    .then(posts => logValue(posts, \"User posts:\"))\r\n    .catch(err => handleError(err, \"Error in fetching user posts:\"));\r\n};\r\n\r\nconst fetchPostComments = (posts) => {\r\n  return fetch(`https://jsonplaceholder.typicode.com/comments?postId=${posts[0].id}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch post comments');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(comments => simulateApiCall(comments))\r\n    .then(comments => logValue(comments, \"Post comments:\"))\r\n    .catch(err => handleError(err, \"Error in fetching post comments:\"));\r\n};\r\n\r\nconst clickHandler = () => {\r\n  console.clear();\r\n\r\n  fetchUserData()\r\n    .then(user => fetchUserPosts(user))\r\n    .then(posts => fetchPostComments(posts))\r\n    .then(comments => {\r\n      console.log(\"All fetch operations succeeded\");\r\n      success = true;\r\n    })\r\n    .catch((err) => console.error(err))\r\n    .finally(() => {\r\n      if (success) {\r\n        console.log(\"Job done!!\");\r\n      } else {\r\n        console.error(`Job failed in step: ${step}`);\r\n      }\r\n      success = false; // Reset success flag for next click\r\n      step = 1; // Reset step counter for next click\r\n    });\r\n};\r\n\r\nbtn.addEventListener(\"click\", clickHandler);\r\ndocument.body.appendChild(btn);\r\n"],"names":["btn","document","createElement","innerText","step","success","simulateApiCall","response","failRate","arguments","length","undefined","Promise","resolve","reject","Math","random","Error","logValue","val","stepMessage","console","log","handleError","err","error","concat","fetchUserData","fetch","then","ok","json","data","fetchUserPosts","user","id","posts","fetchPostComments","comments","clickHandler","clear","addEventListener","body","appendChild"],"sourceRoot":""}